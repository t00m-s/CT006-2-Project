{% extends "base.html" %}

{% block title %}
    <title>Admin panel</title>
{% endblock %}

{% block navbar %}
    {% include "navbar.html" %}
{% endblock %}

{% block content %}
<div class="container-fluid">
    <div class = "col-10 offset-1">
        <table class="table table-striped table-hover" id="users_table">
            <thead>
                <tr>
                {% for col in columns %}
                    <th scope="col">{{ col }}</th>
                {% endfor %}
                    <th scope="col">Change Role</th>
                    <th scope="col">Ban user</th>
                </tr>
            </thead>
            <tbody>
                {% for user in users %}
                <tr>
                    <th scope="row">{{ user.id }}</th>
                    <td>{{ user.name }}</td>
                    <td>{{ user.surname }}</td>
                    <td>{{ user.created_at }}</td>
                    <td>{{ user.role_name }}</td>
                    <td>
                        <form action="/editrole" method="POST">
                            <input type="hidden" id="user_id" name="user_id" value={{user.id}}>
                            <select id="selected_role" name="selected_role" required>
                            {% for role in roles %}
                                <option value={{role.id}}>{{role.name}}</option>
                            {% endfor %}
                            </select>
                            <button type="submit" class="btn btn-success">Change</button>
                        </form>
                    </td>
                    <td>
                        <form action="/banuser" method="POST">
                            <input type="hidden" id="user_id" name="user_id" value={{user.id}}>
                            <button type="submit" class="btn btn-danger">Ban</input>
                        </form>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
